package com.meeran.gs.learning;
import java.util.HashMap;
import java.util.Map;
import java.util.stream.Collectors;

//1.	Implement a method which performs basic string compression by counting sequences of 
// repeating characters. Given "AABBBCCCD" it should return "A2B3C3D1".

public class OneRepeatCharacters {
	public static void main(String Args[]) {
		String str = "AABBBCCCDA";
		System.out.println("Compressed String for the Str "+str+ " is "+getCompressedString(str));
		System.out.println("Compressed String in Order for the Str "+str+ " is "+getCompressedStringinOrder(str));
		str = "AAAAAAAA";
		System.out.println("Compressed String in Order for the Str "+str+ " is "+getCompressedStringinOrder(str));
		str = "A";
		System.out.println("Compressed String in Order for the Str "+str+ " is "+getCompressedStringinOrder(str));
		str = "AABBCCAA";
		System.out.println("Compressed String in Order for the Str "+str+ " is "+getCompressedStringinOrder(str));

	}
	
	static String getCompressedString1(String str) {
		Map<Character,Integer> compressedMap = new HashMap<Character, Integer>();
		
		for(int i=0; i<str.length(); i++) {
			if(compressedMap.containsKey(str.charAt(i))) {
				int index = compressedMap.get(str.charAt(i))+1;
				compressedMap.put(str.charAt(i), index);
			}else {
				compressedMap.put(str.charAt(i), 1);
			}
		}
		StringBuilder resultStr = new StringBuilder();
		for(Map.Entry<Character, Integer> entry: compressedMap.entrySet()) {
			resultStr.append(entry.getKey()+""+entry.getValue());
		}
		return resultStr.toString();
	}
	
	static String getCompressedStringinOrder(String str) {
		StringBuilder resultStr = new StringBuilder();
		
		if(str.length()==1) {
			resultStr.append(str.charAt(0)+""+1);
			return resultStr.toString();
		}
		
		char previousChar = str.charAt(0);
		int count =1;
		
		for(int i=1; i<str.length(); i++) {
			
			if(previousChar == str.charAt(i)) {
				count++;
			}else {
				resultStr.append(previousChar+""+count);
				previousChar = str.charAt(i);
				count=1;
			}
			if(i==str.length()-1) {
				resultStr.append(previousChar+""+count);
			}
		}
		return resultStr.toString();
	}
	
	static String getCompressedString(String str) {
		Map<Character,Integer> compressedMap = new HashMap<Character,Integer>();
		for(Character ch : str.toCharArray()) {
			compressedMap.put(ch, compressedMap.getOrDefault(ch, 1)+1);
		}
		
		return compressedMap.entrySet().stream()
				.collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue)).toString();
	}
	
	
}
